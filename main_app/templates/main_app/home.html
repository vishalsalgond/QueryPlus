{% extends "main_app/base.html" %}
{% load static %}
{% load i18n %}
{% block content %}

  

  {% if user.is_authenticated %}
      <div class="container">
        <nav class="navbar navbar-light">
          <form class="form-inline" method="POST">
            {% csrf_token %}
            <div class="row mb-4 mt-2">
              <input class="form-control mr-sm-2" style="width: 400px;" type="search" placeholder="Search" name="search" aria-label="Search">
              <button class="btn btn-primary my-2 my-sm-0" type="submit">Search</button>
            </div>
          </form>
        </nav>
        <h3> <b>Recent Questions</b> </h3>
        <br>
      </div>
        {% for q in questions %}
        <div class="container">
        <div class="shadow rounded">
          <article class="media content-section">
            <img class="rounded-circle article-img" src="{{ q.author.profile.image.url }}" alt="">
            <div class="media-body">
            <div class="article-metadata">
                <a class="mr-1" href="{% url 'user-profile' q.author.username %}">{{ q.author }}</a>
                <small class="text-muted">asked {{ q.date_posted|timesince }} ago</small>
            </div>
              <h4><a class="article-title" href="{% url 'question-detail' q.id %}"><b>{{ q.question|safe }}</b></a></h4>  
                {% blocktrans count q.answer_set.count as q_ans %}
                  <small class="text-success"> <span class="badge badge-success badge-pill">{{ q_ans }}</span> Answer </small>
                  {% plural %}
                  <small class="text-success"> <span class="badge badge-success badge-pill">{{ q_ans }}</span> Answers </small>
                {% endblocktrans %}       
            </div>
          </article>
        </div>
      </div>
    {% endfor %}
  {% else %}

   <!-- Hero section -->
   <section id="hero" class="d-flex align-items-center">
    <div class="container">
      <div class="row">
        <div class="col-lg-7 d-flex flex-column justify-content-center order-2 order-lg-1">
          <h1>We <i class="fa fa-heart" style="font-size:36px; color: red;"></i> People Who Code</h1>
          <h2>We build products that empower developers and connect them to solutions that enable productivity, growth, and discovery</h2>
          <div class="d-lg-flex">
            <a href="{% url 'register' %}" class="btn-get-started scrollto">Get Started</a>
          </div>
        </div>
        <div class="col-lg-5 order-1 order-lg-2 hero-img">
          <img src="https://cdn.clarisoft.com/img/ddt/front.png" class="img-fluid animated" alt="">
        </div>
      </div>
    </div>
  </section>

  <!-- ======= About Us Section ======= -->
  <section id="about" class="about">
    <div class="container">

      <div class="section-title">
        <h2>For Developers by Developers</h2>
      </div>

      <div class="row content">
        <div class="col-lg-6">
          <p>
            Our mission is to help developers write the script of the future. We help you find and hire skilled developers for your business and providing them the tools they need to share knowledge and work effectively.
          </p>
          <ul>
            <li><i class="ri-check-double-line"></i> Quickly find and share internal knowledge with Q&A</li>
            <li><i class="ri-check-double-line"></i> Level up your knowledge by with the best developers</li>
          </ul>
        </div>
        <div class="col-lg-6 pt-4 pt-lg-0">
          <p>
            QueryPlus is an open community for anyone that codes. We help you get answers to your toughest coding questions, share knowledge with your coworkers in private, and find your next dream job.
          </p>
          <a href="#" class="btn-learn-more">Learn More</a>
        </div>
      </div>

    </div>
  </section><!-- End About Us Section -->
   
    
  {% endif %}


{% endblock content %}

